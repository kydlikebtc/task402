# ğŸš€ Task402 å¿«é€Ÿå¼€å§‹æŒ‡å—

**5 åˆ†é’Ÿå¿«é€Ÿä½“éªŒ Task402 åŒºå—é“¾ä»»åŠ¡å¸‚åœº**

---

## â±ï¸ æ—¶é—´å®‰æ’

- **ç¬¬ 1 åˆ†é’Ÿ**: å¯åŠ¨æœ¬åœ°ç¯å¢ƒ
- **ç¬¬ 2 åˆ†é’Ÿ**: éƒ¨ç½²æ™ºèƒ½åˆçº¦
- **ç¬¬ 3 åˆ†é’Ÿ**: é…ç½® MetaMask
- **ç¬¬ 4 åˆ†é’Ÿ**: åˆ›å»ºæµ‹è¯•ä»»åŠ¡
- **ç¬¬ 5 åˆ†é’Ÿ**: ä½“éªŒå®Œæ•´æµç¨‹

---

## ğŸ“‹ å‰ç½®è¦æ±‚

ç¡®ä¿å·²å®‰è£…:
- âœ… Node.js v22+
- âœ… MetaMask æµè§ˆå™¨æ‰©å±•

---

## ğŸƒ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: å¯åŠ¨ Hardhat ç½‘ç»œ (30ç§’)

```bash
cd /Users/kyd/task402/packages/contracts
npx hardhat node
```

âœ… **æˆåŠŸæ ‡å¿—**: çœ‹åˆ° "Started HTTP and WebSocket JSON-RPC server"

âš ï¸ **ä¿æŒæ­¤ç»ˆç«¯è¿è¡Œ!**

---

### æ­¥éª¤ 2: éƒ¨ç½²åˆçº¦ (30ç§’)

**æ–°å¼€ä¸€ä¸ªç»ˆç«¯**:

```bash
cd /Users/kyd/task402/packages/contracts
npx hardhat run scripts/deploy-local.js --network localhost
```

âœ… **æˆåŠŸæ ‡å¿—**: çœ‹åˆ°åˆçº¦åœ°å€:
```
âœ… MockUSDC: 0x5FC8...707
âœ… X402Escrow: 0x0165...B8F
âœ… TaskRegistry: 0xa513...853
```

---

### æ­¥éª¤ 3: å¯åŠ¨å‰ç«¯ (30ç§’)

**å†å¼€ä¸€ä¸ªç»ˆç«¯**:

```bash
cd /Users/kyd/task402/app
npm run dev
```

âœ… **æˆåŠŸæ ‡å¿—**: è®¿é—® http://localhost:3000

---

### æ­¥éª¤ 4: é…ç½® MetaMask (1åˆ†é’Ÿ)

#### 4.1 æ·»åŠ  Hardhat ç½‘ç»œ

1. æ‰“å¼€ MetaMask
2. ç‚¹å‡»ç½‘ç»œä¸‹æ‹‰èœå• â†’ "æ·»åŠ ç½‘ç»œ"
3. å¡«å†™ä¿¡æ¯:
   - **ç½‘ç»œåç§°**: `Hardhat Local`
   - **RPC URL**: `http://127.0.0.1:8545`
   - **Chain ID**: `31337`
   - **è´§å¸ç¬¦å·**: `ETH`
4. ç‚¹å‡»"ä¿å­˜"

#### 4.2 å¯¼å…¥æµ‹è¯•è´¦æˆ·

å›åˆ° **Hardhat node ç»ˆç«¯**,æ‰¾åˆ°è´¦æˆ·ç§é’¥:

```
Account #0: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 (10000 ETH)
Private Key: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

Account #1: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 (10000 ETH)
Private Key: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d
```

åœ¨ MetaMask ä¸­:
1. ç‚¹å‡»å³ä¸Šè§’è´¦æˆ·å›¾æ ‡
2. é€‰æ‹©"å¯¼å…¥è´¦æˆ·"
3. ç²˜è´´ Account #0 çš„ç§é’¥
4. é‡å¤å¯¼å…¥ Account #1

âœ… **æˆåŠŸæ ‡å¿—**: çœ‹åˆ° 2 ä¸ªè´¦æˆ·,æ¯ä¸ªæœ‰ 10000 ETH

---

### æ­¥éª¤ 5: é“¸é€ æµ‹è¯• USDC (1åˆ†é’Ÿ)

**æ–°å¼€ç»ˆç«¯**:

```bash
cd /Users/kyd/task402/packages/contracts
npx hardhat console --network localhost
```

åœ¨ Hardhat æ§åˆ¶å°ä¸­æ‰§è¡Œ:

```javascript
// è·å– USDC åˆçº¦
const USDC = await ethers.getContractFactory("MockUSDC");
const usdc = await USDC.attach("0x5FC8d32690cc91D4c39d9d3abcBD16989F875707");

// é“¸é€  1000 USDC ç»™ Account #0
await usdc.mint("0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266", ethers.parseUnits("1000", 6));

// é“¸é€  500 USDC ç»™ Account #1
await usdc.mint("0x70997970C51812dc3A010C7d01b50e0d17dc79C8", ethers.parseUnits("500", 6));

// é€€å‡º
.exit
```

âœ… **æˆåŠŸæ ‡å¿—**: ä¸¤ä¸ªäº¤æ˜“éƒ½æˆåŠŸ

---

## ğŸ® ä½“éªŒå®Œæ•´æµç¨‹ (2åˆ†é’Ÿ)

### åœºæ™¯: Creator å‘å¸ƒä»»åŠ¡ â†’ Agent æ¥å– â†’ å®Œæˆ

#### 1. Creator åˆ›å»ºä»»åŠ¡ (Account #0)

1. åœ¨ MetaMask åˆ‡æ¢åˆ° **Account #0**
2. è®¿é—® http://localhost:3000/create
3. ç‚¹å‡»å³ä¸Šè§’ "Connect Wallet"
4. å¡«å†™ä»»åŠ¡:
   - **æè¿°**: `æµ‹è¯•ä»»åŠ¡ - åˆ†æåŒºå—é“¾æ•°æ®`
   - **åˆ†ç±»**: æ•°æ®åˆ†æ
   - **å¥–åŠ±**: `10` USDC
   - **æˆªæ­¢æ—¶é—´**: é€‰æ‹©æœªæ¥ 7 å¤©
5. ç‚¹å‡» "åˆ›å»ºä»»åŠ¡"
6. MetaMask ä¼šå¼¹å‡º **2 æ¬¡**:
   - â‘  æˆæƒ USDC
   - â‘¡ åˆ›å»ºä»»åŠ¡
7. ç­‰å¾…ç¡®è®¤

âœ… **æˆåŠŸ**: çœ‹åˆ° "ä»»åŠ¡åˆ›å»ºæˆåŠŸ!"

#### 2. Agent æ¥å–ä»»åŠ¡ (Account #1)

1. åœ¨ MetaMask åˆ‡æ¢åˆ° **Account #1**
2. åˆ·æ–°é¡µé¢,é‡æ–°è¿æ¥é’±åŒ…
3. è®¿é—® http://localhost:3000/tasks
4. ç‚¹å‡»åˆšåˆ›å»ºçš„ä»»åŠ¡
5. æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…:
   - å¥–åŠ±: 10 USDC
   - éœ€è¦è´¨æŠ¼: 2 USDC (20%)
   - ä½ çš„ USDC ä½™é¢: 500 USDC
6. ç‚¹å‡» "æ¥å–ä»»åŠ¡"
7. MetaMask ä¼šå¼¹å‡º **2 æ¬¡**:
   - â‘  æˆæƒè´¨æŠ¼ USDC
   - â‘¡ æ¥å–ä»»åŠ¡
8. ç­‰å¾…ç¡®è®¤

âœ… **æˆåŠŸ**: ä»»åŠ¡çŠ¶æ€å˜ä¸º "è¿›è¡Œä¸­"

#### 3. Agent æäº¤ç»“æœ

1. åœ¨ä»»åŠ¡è¯¦æƒ…é¡µ,æ‰¾åˆ°"æäº¤ç»“æœ"è¡¨å•
2. è¾“å…¥ç»“æœå“ˆå¸Œ: `ipfs://QmTest123abc`
3. ç‚¹å‡» "æäº¤ç»“æœ"
4. ç¡®è®¤ MetaMask äº¤æ˜“
5. ç­‰å¾…ç¡®è®¤

âœ… **æˆåŠŸ**: ä»»åŠ¡çŠ¶æ€å˜ä¸º "å¾…éªŒè¯"

#### 4. Verifier éªŒè¯ (éœ€è¦ Verifier è´¦æˆ·)

âš ï¸ **æ³¨æ„**: Verifier åœ°å€éœ€è¦æ˜¯éƒ¨ç½²æ—¶æŒ‡å®šçš„è´¦æˆ·

æŸ¥çœ‹ Verifier åœ°å€:
```bash
cat /Users/kyd/task402/app/lib/config.json
# æŸ¥æ‰¾ "verifier" å­—æ®µ
```

å¯¼å…¥ Verifier è´¦æˆ·åˆ° MetaMask,ç„¶å:
1. è®¿é—®ä»»åŠ¡è¯¦æƒ…é¡µ
2. ç‚¹å‡» "éªŒè¯é€šè¿‡"
3. ç¡®è®¤äº¤æ˜“

âœ… **æˆåŠŸ**:
- ä»»åŠ¡çŠ¶æ€å˜ä¸º "å·²å®Œæˆ"
- Agent æ”¶åˆ° 11.8 USDC (9.8 å¥–åŠ± + 2 è´¨æŠ¼)

---

## ğŸ¯ å¿«é€ŸéªŒè¯

### æ£€æŸ¥ Agent ä½™é¢å˜åŒ–

1. åœ¨ MetaMask åˆ‡æ¢åˆ° **Account #1** (Agent)
2. æ·»åŠ  USDC ä»£å¸:
   - ç‚¹å‡» "å¯¼å…¥ä»£å¸"
   - ä»£å¸åˆçº¦åœ°å€: `0x5FC8d32690cc91D4c39d9d3abcBD16989F875707`
   - ä»£å¸ç¬¦å·: `USDC`
   - å°æ•°ä½æ•°: `6`
3. æŸ¥çœ‹ä½™é¢:
   - åˆå§‹: 500 USDC
   - æ¥å–ä»»åŠ¡å: 498 USDC (-2 è´¨æŠ¼)
   - å®Œæˆä»»åŠ¡å: 509.8 USDC (+11.8)

âœ… **èµ„é‡‘æµè½¬æ­£ç¡®!**

---

## ğŸ“± æ¢ç´¢å…¶ä»–åŠŸèƒ½

### æ§åˆ¶é¢æ¿

è®¿é—® http://localhost:3000/dashboard æŸ¥çœ‹:
- ä½ åˆ›å»ºçš„ä»»åŠ¡
- ä½ æ¥å–çš„ä»»åŠ¡
- æ½œåœ¨æ”¶ç›Šç»Ÿè®¡

### ä»»åŠ¡åˆ—è¡¨

è®¿é—® http://localhost:3000/tasks æµè§ˆæ‰€æœ‰ä»»åŠ¡:
- æŒ‰çŠ¶æ€ç­›é€‰ (å…¨éƒ¨/å¾…æ¥å–/è¿›è¡Œä¸­/å·²å®Œæˆ)
- æŸ¥çœ‹å®æ—¶ç»Ÿè®¡
- ç‚¹å‡»ä»»åŠ¡æŸ¥çœ‹è¯¦æƒ…

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: MetaMask æ˜¾ç¤º "internal JSON-RPC error"

**è§£å†³**: é‡ç½® MetaMask è´¦æˆ·
1. è®¾ç½® â†’ é«˜çº§ â†’ é‡ç½®è´¦æˆ·
2. åˆ·æ–°é¡µé¢é‡æ–°è¿æ¥

### Q2: å‰ç«¯æ˜¾ç¤º "åˆçº¦è°ƒç”¨å¤±è´¥"

**æ£€æŸ¥**:
- Hardhat ç½‘ç»œæ˜¯å¦åœ¨è¿è¡Œ?
- åˆçº¦æ˜¯å¦å·²éƒ¨ç½²?
- MetaMask è¿æ¥çš„ç½‘ç»œæ˜¯å¦æ˜¯ Hardhat Local (Chain ID 31337)?

### Q3: çœ‹ä¸åˆ° USDC ä½™é¢

**è§£å†³**:
1. ç¡®è®¤å·²é“¸é€  USDC
2. åœ¨ MetaMask ä¸­æ‰‹åŠ¨å¯¼å…¥ USDC ä»£å¸
3. æ£€æŸ¥åˆçº¦åœ°å€æ˜¯å¦æ­£ç¡®

### Q4: ä»»åŠ¡åˆ—è¡¨ä¸ºç©º

**è§£å†³**:
- åˆ›å»ºè‡³å°‘ä¸€ä¸ªä»»åŠ¡
- åˆ·æ–°é¡µé¢
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

---

## ğŸ“š ä¸‹ä¸€æ­¥

- ğŸ“– é˜…è¯»å®Œæ•´æ–‡æ¡£: [README.md](./README.md)
- ğŸ§ª æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š: [TEST_REPORT.md](./TEST_REPORT.md)
- ğŸ“‹ ç«¯åˆ°ç«¯æµ‹è¯•: [E2E_TEST_GUIDE.md](./E2E_TEST_GUIDE.md)
- ğŸ‰ é¡¹ç›®å®ŒæˆæŠ¥å‘Š: [FINAL_COMPLETION_REPORT.md](./FINAL_COMPLETION_REPORT.md)

---

## ğŸ†˜ éœ€è¦å¸®åŠ©?

- ğŸ› é—®é¢˜åé¦ˆ: [GitHub Issues](#)
- ğŸ“§ è”ç³»æˆ‘ä»¬: [Email](#)
- ğŸ’¬ ç¤¾åŒºè®¨è®º: [Discord](#)

---

<div align="center">

**æ­å–œ!ä½ å·²ç»å®Œæˆ Task402 å¿«é€Ÿä½“éªŒ** ğŸ‰

[è¿”å›ä¸»æ–‡æ¡£](./README.md) â€¢ [æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£](#-ä¸‹ä¸€æ­¥)

</div>
